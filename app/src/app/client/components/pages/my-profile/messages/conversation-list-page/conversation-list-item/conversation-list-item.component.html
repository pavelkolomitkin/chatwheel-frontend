<ng-container *ngIf="_conversation">

  <td class="right-column">
    <div class="d-inline-block align-middle left-block">
      <div class="avatar-container">
        <app-user-avatar *ngIf="!!addressee"
                         [size]="'small'"
                         [user]="addressee"
                         [isActivityVisible]="true"
        ></app-user-avatar>
      </div>
      <div class="d-inline-block last-message-block">
        <h6 class="mb-0" *ngIf="!!addressee">{{ addressee.fullName }}</h6>

        <p class="text-muted mb-0 message-container" >
          <app-conversation-last-message
            [user]="user"
            [conversation]="_conversation"
          ></app-conversation-last-message>

        </p>

      </div>
    </div>
  </td>

  <td class="text-right">
    <div class="controls">
      <span class="btn" (click)="onDeleteClickHandler($event)">
        <i class="ik ik-trash"></i>
      </span>
    </div>
    <div class="message-number" *ngIf="_conversation.newMessageNumber > 0">
      <span class="badge badge-pill badge-primary">{{ _conversation.newMessageNumber }}</span>
    </div>
  </td>

  <app-alert-window [title]="'DELETE_CONVERSATION_QUESTION' | translate" [(isShown)]="isAlertShown">
    <div content>
      {{ 'ARE_YOU_SURE_YOU_WANNA_DELETE_THE_CONVERSATION' | translate }}
    </div>
    <div footer>
      <button type="button" class="btn btn-outline-danger" (click)="onConversationDeleteHandler($event)">{{ 'DELETE' | translate }}</button>
    </div>
  </app-alert-window>

</ng-container>

<app-user-typing
  [typing]="typing"
  (onVisible)="onTypingVisibilityChangeHandler($event)"
></app-user-typing>

