<div class="chat-card">
  <div class="card-header">
    <div class="addressee-block" *ngIf="!!addressee">

      <div class="picture-container d-inline-block">
        <a [routerLink]="'/client/profile/' + addressee.id">
          <app-user-avatar
            [size]="'mediumSmall'"
            [user]="addressee"
            [isActivityVisible]="true"
            [additionalStyles]="{ cursor: 'pointer' }"
          ></app-user-avatar>
        </a>
      </div>
      <div class="name-block d-inline-block pl-10">
        <h6>
          <a [routerLink]="'/client/profile/' + addressee.id">{{ addressee.fullName }}</a>
        </h6>
        <div class="interests" *ngIf="addressee.interests.length > 0">
          <span class="badge badge-pill badge-primary mr-1" *ngFor="let interest of addressee.interests.slice(0, 10)">{{ interest.name }}</span>
          <ng-container *ngIf="addressee.interests.length > 10">
            <span class="text-muted small">and many more...</span>
          </ng-container>
        </div>
      </div>

    </div>

    <div class="card-header-right controls text-right" *ngIf="!!addressee">

      <app-report-abuse-buttons
        [user]="addressee"
      ></app-report-abuse-buttons>

    </div>


  </div>
  <div class="card-block">

    <div class="list-container" #messageListContainer

         infiniteScroll
         [scrollWindow]="false"
         [infiniteScrollThrottle]="50"
         [infiniteScrollUpDistance]="-8"
         [infiniteScrollDisabled]="infinityScrollDisabled"
         (scrolledUp)="onScroll()"
    >

      <ng-container *ngIf="isLoading">
        <div class="loading-container">
          <div>
            <img src="../../../../../../../assets/ajax-loader.gif" />
          </div>
        </div>
      </ng-container>

      <ng-container *ngIf="messages !== null">
        <app-message-list-item
          *ngFor="let message of messages;"
          [message]="message"
          (onRemoved)="onMessageRemovedHandler($event)"
        ></app-message-list-item>

      </ng-container>

    </div>

    <app-conversation-user-input
      (onSubmit)="onMessageSubmitHandler($event)"
      [isEnabled]="isInitialized"
    ></app-conversation-user-input>

  </div>
</div>
